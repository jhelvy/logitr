<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data Formatting and Encoding • logitr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Formatting and Encoding">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">logitr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/basic_usage.html">Basic Usage</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/utility_models.html">Utility Models in the Preference &amp; WTP Space</a></li>
    <li><a class="dropdown-item" href="../articles/data_formatting.html">Data Formatting and Encoding</a></li>
    <li><a class="dropdown-item" href="../articles/mnl_models.html">Estimating Multinomial Logit Models</a></li>
    <li><a class="dropdown-item" href="../articles/mxl_models.html">Estimating Mixed Logit Models</a></li>
    <li><a class="dropdown-item" href="../articles/interactions.html">Estimating Models with Interactions</a></li>
    <li><a class="dropdown-item" href="../articles/mnl_models_weighted.html">Estimating Weighted Logit Models</a></li>
    <li><a class="dropdown-item" href="../articles/predict.html">Predicting Probabilities and Outcomes with Estimated Models</a></li>
    <li><a class="dropdown-item" href="../articles/summarizing_results.html">Summarizing Results</a></li>
    <li><a class="dropdown-item" href="../articles/benchmark.html">Benchmarking estimation speed against other packages</a></li>
    <li><a class="dropdown-item" href="../articles/convergence.html">WTP space convergence issues in other packages</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jhelvy/logitr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data Formatting and Encoding</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/logitr/blob/master/vignettes/data_formatting.Rmd" class="external-link"><code>vignettes/data_formatting.Rmd</code></a></small>
      <div class="d-none name"><code>data_formatting.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="basic-required-format">Basic required format<a class="anchor" aria-label="anchor" href="#basic-required-format"></a>
</h2>
<p>The {logitr} package requires that data be structured in a
<code>data.frame</code> and arranged in a “long” format <span class="citation">[@Wickham2014]</span> where each row contains data on a
single alternative from a choice observation. The choice observations do
not have to be symmetric, meaning they can have a “ragged” structure
where different choice observations have different numbers of
alternatives. The data must also include variables for each of the
following:</p>
<ul>
<li>
<strong>Outcome</strong>: A dummy-coded variable that identifies
which alternative was chosen (<code>1</code> is chosen, <code>0</code>
is not chosen). Only one alternative should have a <code>1</code> per
choice observation.</li>
<li>
<strong>Observation ID</strong>: A sequence of repeated numbers that
identifies each unique choice observation. For example, if the first
three choice observations had 2 alternatives each, then the first 6 rows
of the <code>obsID</code> variable would be
<code>1, 1, 2, 2, 3, 3</code>.</li>
<li>
<strong>Covariates</strong>: Other variables that will be used as
model covariates.</li>
</ul>
<p>The {logitr} package contains several example data sets that
illustrate this data structure. For example, the <code>yogurt</code>
contains observations of yogurt purchases by a panel of 100 households
<span class="citation">[@Jain1994]</span>. Choice is identified by the
<code>choice</code> column, the observation ID is identified by the
<code>obsID</code> column, and the columns <code>price</code>,
<code>feat</code>, and <code>brand</code> can be used as model
covariates:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/jhelvy/logitr" class="external-link">"logitr"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">yogurt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id obsID alt choice price feat   brand</span></span>
<span><span class="co">#&gt; 1  1     1   1      0   8.1    0  dannon</span></span>
<span><span class="co">#&gt; 2  1     1   2      0   6.1    0  hiland</span></span>
<span><span class="co">#&gt; 3  1     1   3      1   7.9    0  weight</span></span>
<span><span class="co">#&gt; 4  1     1   4      0  10.8    0 yoplait</span></span>
<span><span class="co">#&gt; 5  1     2   1      1   9.8    0  dannon</span></span>
<span><span class="co">#&gt; 6  1     2   2      0   6.4    0  hiland</span></span></code></pre></div>
<p>This data set also includes an <code>alt</code> variable that
determines the alternatives included in the choice set of each
observation and an <code>id</code> variable that determines the
individual as the data have a panel structure containing multiple choice
observations from each individual.</p>
</div>
<div class="section level2">
<h2 id="continuous-versus-discrete-variables">Continuous versus discrete variables<a class="anchor" aria-label="anchor" href="#continuous-versus-discrete-variables"></a>
</h2>
<p>Variables are modeled as either continuous or discrete based on their
data <em>type</em>. Numeric variables are by default estimated with a
single “slope” coefficient. For example, consider a data frame that
contains a <code>price</code> variable with the levels $10, $15, and
$20. Adding <code>price</code> to the <code>pars</code> argument in the
main <code><a href="../reference/logitr.html">logitr()</a></code> function would result in a single
<code>price</code> coefficient for the “slope” of the change in
price.</p>
<p>In contrast, categorical variables (i.e. <code>character</code> or
<code>factor</code> type variables) are by default estimated with a
coefficient for all but the first level, which serves as the reference
level. The default reference level is determined alphabetically, but it
can also be set by modifying the factor levels for that variable. For
example, the default reference level for the <code>brand</code> variable
is <code>"dannon"</code> as it is alphabetically first. To set
<code>"weight"</code> as the reference level, the factor levels can be
modified using the <code><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor()</a></code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yogurt2</span> <span class="op">&lt;-</span> <span class="va">yogurt</span></span>
<span></span>
<span><span class="va">brands</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weight"</span>, <span class="st">"hiland"</span>, <span class="st">"yoplait"</span>, <span class="st">"dannon"</span><span class="op">)</span></span>
<span><span class="va">yogurt2</span><span class="op">$</span><span class="va">brand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">yogurt2</span><span class="op">$</span><span class="va">brand</span>, levels <span class="op">=</span> <span class="va">brands</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-dummy-coded-variables">Creating dummy coded variables<a class="anchor" aria-label="anchor" href="#creating-dummy-coded-variables"></a>
</h2>
<p>If you wish to make dummy-coded variables yourself to use them in a
model, I recommend using the <code>dummy_cols()</code> function from the
<a href="https://github.com/jacobkap/fastDummies" class="external-link">{fastDummies}</a>
package. For example, in the code below, I create dummy-coded columns
for the <code>brand</code> variable and then use those variables as
covariates in a model:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yogurt2</span> <span class="op">&lt;-</span> <span class="fu">fastDummies</span><span class="fu">::</span><span class="fu"><a href="https://jacobkap.github.io/fastDummies/reference/dummy_cols.html" class="external-link">dummy_cols</a></span><span class="op">(</span><span class="va">yogurt2</span>, <span class="st">"brand"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>yogurt2</code> data frame now has new dummy-coded columns
for brand:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">yogurt2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;      id obsID   alt choice price  feat brand   brand_weight brand_hiland</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1     1     1      0  8.1      0 dannon             0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     1     1     2      0  6.10     0 hiland             0            1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     1     1     3      1  7.90     0 weight             1            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     1     1     4      0 10.8      0 yoplait            0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     1     2     1      1  9.80     0 dannon             0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     1     2     2      0  6.40     0 hiland             0            1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: brand_yoplait &lt;int&gt;, brand_dannon &lt;int&gt;</span></span></span></code></pre></div>
<p>Now I can use those columns as covariates:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mnl_pref_dummies</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/logitr.html">logitr</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">yogurt2</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">'choice'</span>,</span>
<span>  obsID   <span class="op">=</span> <span class="st">'obsID'</span>,</span>
<span>  pars    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">'price'</span>, <span class="st">'feat'</span>, <span class="st">'brand_yoplait'</span>, <span class="st">'brand_dannon'</span>, <span class="st">'brand_weight'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mnl_pref_dummies</span><span class="op">)</span></span>
<span><span class="co">#&gt; =================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model estimated on: Fri Dec 19 21:44:05 2025 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Using logitr version: 1.1.3 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; logitr(data = yogurt2, outcome = "choice", obsID = "obsID", pars = c("price", </span></span>
<span><span class="co">#&gt;     "feat", "brand_yoplait", "brand_dannon", "brand_weight"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Frequencies of alternatives:</span></span>
<span><span class="co">#&gt;        1        2        3        4 </span></span>
<span><span class="co">#&gt; 0.402156 0.029436 0.229270 0.339138 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.</span></span>
<span><span class="co">#&gt;                                 </span></span>
<span><span class="co">#&gt; Model Type:    Multinomial Logit</span></span>
<span><span class="co">#&gt; Model Space:          Preference</span></span>
<span><span class="co">#&gt; Model Run:                1 of 1</span></span>
<span><span class="co">#&gt; Iterations:                   18</span></span>
<span><span class="co">#&gt; Elapsed Time:        0h:0m:0.03s</span></span>
<span><span class="co">#&gt; Algorithm:        NLOPT_LD_LBFGS</span></span>
<span><span class="co">#&gt; Weights Used?:             FALSE</span></span>
<span><span class="co">#&gt; Robust?                    FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Coefficients: </span></span>
<span><span class="co">#&gt;                Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; price         -0.366581   0.024366 -15.045 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; feat           0.491412   0.120063   4.093 4.259e-05 ***</span></span>
<span><span class="co">#&gt; brand_yoplait  4.450197   0.187118  23.783 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; brand_dannon   3.715575   0.145419  25.551 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; brand_weight   3.074399   0.145384  21.147 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt;                                      </span></span>
<span><span class="co">#&gt; Log-Likelihood:         -2656.8878788</span></span>
<span><span class="co">#&gt; Null Log-Likelihood:    -3343.7419990</span></span>
<span><span class="co">#&gt; AIC:                     5323.7757575</span></span>
<span><span class="co">#&gt; BIC:                     5352.7168000</span></span>
<span><span class="co">#&gt; McFadden R2:                0.2054148</span></span>
<span><span class="co">#&gt; Adj McFadden R2:            0.2039195</span></span>
<span><span class="co">#&gt; Number of Observations:  2412.0000000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validating-data-before-estimation">Validating data before estimation<a class="anchor" aria-label="anchor" href="#validating-data-before-estimation"></a>
</h2>
<p>Before estimating a model, it is often helpful to validate that your
data is properly formatted. The <code><a href="../reference/validate_data.html">validate_data()</a></code> function
checks for common formatting errors and provides detailed diagnostic
information. This can save time by catching errors before you attempt to
estimate a model.</p>
<div class="section level3">
<h3 id="basic-validation">Basic validation<a class="anchor" aria-label="anchor" href="#basic-validation"></a>
</h3>
<p>At a minimum, you should validate the <code>outcome</code> and
<code>obsID</code> columns:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_data.html">validate_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">yogurt</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">validation</span></span>
<span><span class="co">#&gt; === LOGITR DATA VALIDATION ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Overview:</span></span>
<span><span class="co">#&gt;   Rows: 9648 </span></span>
<span><span class="co">#&gt;   Columns: 7 </span></span>
<span><span class="co">#&gt;   Outcome variable: choice </span></span>
<span><span class="co">#&gt;   Observation ID: obsID </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Structure:</span></span>
<span><span class="co">#&gt;   Total observations: 2412 </span></span>
<span><span class="co">#&gt;   Total alternatives: 9648 </span></span>
<span><span class="co">#&gt;   Valid choices: 2412 </span></span>
<span><span class="co">#&gt;   Alternatives per observation:</span></span>
<span><span class="co">#&gt;      4 alternatives: 2412 observations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === VALIDATION RESULTS ===</span></span>
<span><span class="co">#&gt; ✓ Data validation PASSED - no issues found!</span></span>
<span><span class="co">#&gt; ✓ Data appears ready for use with logitr()!</span></span></code></pre></div>
<p>The function returns a validation object that indicates whether the
data is valid and provides summary information about the data
structure.</p>
</div>
<div class="section level3">
<h3 id="validation-with-parameters">Validation with parameters<a class="anchor" aria-label="anchor" href="#validation-with-parameters"></a>
</h3>
<p>You can also validate specific parameters to check for missing values
or other issues:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_data.html">validate_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">yogurt</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"feat"</span>, <span class="st">"brand"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">validation</span></span>
<span><span class="co">#&gt; === LOGITR DATA VALIDATION ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Overview:</span></span>
<span><span class="co">#&gt;   Rows: 9648 </span></span>
<span><span class="co">#&gt;   Columns: 7 </span></span>
<span><span class="co">#&gt;   Outcome variable: choice </span></span>
<span><span class="co">#&gt;   Observation ID: obsID </span></span>
<span><span class="co">#&gt;   Parameters: price, feat, brand </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Structure:</span></span>
<span><span class="co">#&gt;   Total observations: 2412 </span></span>
<span><span class="co">#&gt;   Total alternatives: 9648 </span></span>
<span><span class="co">#&gt;   Valid choices: 2412 </span></span>
<span><span class="co">#&gt;   Alternatives per observation:</span></span>
<span><span class="co">#&gt;      4 alternatives: 2412 observations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Information:</span></span>
<span><span class="co">#&gt;    price ( numeric ): range [ 0.3 , 19.3 ]</span></span>
<span><span class="co">#&gt;    feat ( numeric ): range [ 0 , 1 ]</span></span>
<span><span class="co">#&gt;    brand ( character ):  4 levels - dannon, hiland, weight, yoplait</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === VALIDATION RESULTS ===</span></span>
<span><span class="co">#&gt; ✓ Data validation PASSED - no issues found!</span></span>
<span><span class="co">#&gt; ✓ Data appears ready for use with logitr()!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="panel-data-validation">Panel data validation<a class="anchor" aria-label="anchor" href="#panel-data-validation"></a>
</h3>
<p>For panel data, you can validate the panel structure:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_data.html">validate_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">yogurt</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span>,</span>
<span>  pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"price"</span>, <span class="st">"feat"</span>, <span class="st">"brand"</span><span class="op">)</span>,</span>
<span>  panelID <span class="op">=</span> <span class="st">"id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">validation</span></span>
<span><span class="co">#&gt; === LOGITR DATA VALIDATION ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Overview:</span></span>
<span><span class="co">#&gt;   Rows: 9648 </span></span>
<span><span class="co">#&gt;   Columns: 7 </span></span>
<span><span class="co">#&gt;   Outcome variable: choice </span></span>
<span><span class="co">#&gt;   Observation ID: obsID </span></span>
<span><span class="co">#&gt;   Parameters: price, feat, brand </span></span>
<span><span class="co">#&gt;   Panel ID: id </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Structure:</span></span>
<span><span class="co">#&gt;   Total observations: 2412 </span></span>
<span><span class="co">#&gt;   Total alternatives: 9648 </span></span>
<span><span class="co">#&gt;   Valid choices: 2412 </span></span>
<span><span class="co">#&gt;   Alternatives per observation:</span></span>
<span><span class="co">#&gt;      4 alternatives: 2412 observations</span></span>
<span><span class="co">#&gt;   Panel structure:</span></span>
<span><span class="co">#&gt;     Individuals: 100 </span></span>
<span><span class="co">#&gt;     Observations per individual: Min = 4 , Max = 185 , Mean = 24.1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Information:</span></span>
<span><span class="co">#&gt;    price ( numeric ): range [ 0.3 , 19.3 ]</span></span>
<span><span class="co">#&gt;    feat ( numeric ): range [ 0 , 1 ]</span></span>
<span><span class="co">#&gt;    brand ( character ):  4 levels - dannon, hiland, weight, yoplait</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === VALIDATION RESULTS ===</span></span>
<span><span class="co">#&gt; ✓ Data validation PASSED - no issues found!</span></span>
<span><span class="co">#&gt; ✓ Data appears ready for use with logitr()!</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="common-errors-detected">Common errors detected<a class="anchor" aria-label="anchor" href="#common-errors-detected"></a>
</h3>
<p>The <code><a href="../reference/validate_data.html">validate_data()</a></code> function checks for several common
formatting errors:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Multiple choices per observation</strong>: Each
<code>obsID</code> should have exactly one choice (outcome = 1)</li>
<li>
<strong>No choice in observation</strong>: Each <code>obsID</code>
must have at least one choice</li>
<li>
<strong>Non-contiguous observation blocks</strong>: All rows with
the same <code>obsID</code> must be grouped together</li>
<li>
<strong>Invalid outcome values</strong>: The outcome variable must
only contain 0 and 1 (or TRUE and FALSE)</li>
<li>
<strong>Missing values</strong>: Checks for missing values in
required columns</li>
</ol>
<p>Here’s an example of detecting an error:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create problematic data with multiple choices in one observation</span></span>
<span><span class="va">bad_data</span> <span class="op">&lt;-</span> <span class="va">yogurt</span></span>
<span><span class="va">bad_data</span><span class="op">$</span><span class="va">choice</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="va">validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_data.html">validate_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bad_data</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  obsID <span class="op">=</span> <span class="st">"obsID"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">validation</span></span>
<span><span class="co">#&gt; === LOGITR DATA VALIDATION ===</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Overview:</span></span>
<span><span class="co">#&gt;   Rows: 9648 </span></span>
<span><span class="co">#&gt;   Columns: 7 </span></span>
<span><span class="co">#&gt;   Outcome variable: choice </span></span>
<span><span class="co">#&gt;   Observation ID: obsID </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Data Structure:</span></span>
<span><span class="co">#&gt;   Total observations: 2412 </span></span>
<span><span class="co">#&gt;   Total alternatives: 9648 </span></span>
<span><span class="co">#&gt;   Valid choices: 2411 </span></span>
<span><span class="co">#&gt;   Alternatives per observation:</span></span>
<span><span class="co">#&gt;      4 alternatives: 2412 observations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === VALIDATION RESULTS ===</span></span>
<span><span class="co">#&gt; ✗ ERRORS found:</span></span>
<span><span class="co">#&gt;    1 . Multiple choices (&gt;1) found in obsID(s): 1  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Detailed locations for multiple choices:</span></span>
<span><span class="co">#&gt;     ObsID 1 - rows: 1, 2, 3, 4 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Please fix the errors above before using with logitr().</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Helveston.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
