<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Utility Models in the Preference &amp; WTP Space • logitr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Utility Models in the Preference &amp; WTP Space">
<meta property="og:description" content="logitr">
<meta property="og:image" content="https://jhelvy.github.io/logitr/reference/figures/logo.png">
<meta property="og:image:alt" content="Logo for the logitr package">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@JohnHelveston">
<meta name="twitter:site" content="@JohnHelveston">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">logitr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/basic_usage.html">Basic Usage</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/utility_models.html">Utility Models in the Preference &amp; WTP Space</a>
    </li>
    <li>
      <a href="../articles/data_formatting.html">Data Formatting and Encoding</a>
    </li>
    <li>
      <a href="../articles/mnl_models.html">Estimating Multinomial Logit Models</a>
    </li>
    <li>
      <a href="../articles/mxl_models.html">Estimating Mixed Logit Models</a>
    </li>
    <li>
      <a href="../articles/interactions.html">Estimating Models with Interactions</a>
    </li>
    <li>
      <a href="../articles/mnl_models_weighted.html">Estimating Weighted Logit Models</a>
    </li>
    <li>
      <a href="../articles/predict.html">Predicting Probabilities and Outcomes with Estimated Models</a>
    </li>
    <li>
      <a href="../articles/summarizing_results.html">Summarizing Results</a>
    </li>
    <li>
      <a href="../articles/benchmark.html">Benchmarking estimation speed against other packages</a>
    </li>
    <li>
      <a href="../articles/convergence.html">WTP space convergence issues in other packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jhelvy/logitr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="utility_models_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Utility Models in the Preference &amp; WTP Space</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jhelvy/logitr/blob/HEAD/vignettes/utility_models.Rmd" class="external-link"><code>vignettes/utility_models.Rmd</code></a></small>
      <div class="hidden name"><code>utility_models.Rmd</code></div>

    </div>

    
    

<p>In many applications of discrete choice models, modelers are interested in estimating consumer’s marginal “willingness-to-pay” (WTP) for different attributes. WTP can be estimated in two ways:</p>
<ol style="list-style-type: decimal">
<li>Estimate a discrete choice model in the “preference space” where parameters have units of utility and then compute the WTP by dividing the parameters by the price parameter.</li>
<li>Estimate a discrete choice model in the “WTP space” where parameters have units of WTP.</li>
</ol>
<p>While the two procedures generally produce the same estimates of WTP for homogenous models, the same is not true for heterogeneous models where model parameters are assumed to follow a specific distribution, such as normal or log-normal <span class="citation">(Train and Weeks 2005)</span>. For example, in a preference space specification, a normally distributed attribute parameter divided by a log-normally distributed price parameter produces a strange WTP distribution with large tails. In contrast, a WTP space specification allows the modeler to directly assume WTP is normally distributed. The  package was developed to enable modelers to choose between these two utility spaces when estimating multinomial logit models.</p>
<div class="section level2">
<h2 id="the-random-utility-model-in-two-spaces">The random utility model in two spaces<a class="anchor" aria-label="anchor" href="#the-random-utility-model-in-two-spaces"></a>
</h2>
<p>The random utility model is a well-established framework in many fields for estimating consumer preferences from observed consumer choices <span class="citation">(Louviere, Hensher, and Swait 2000; Train 2009)</span>. Random utility models assume that consumers choose the alternative <span class="math inline">\(j\)</span> a set of alternatives that has the greatest utility <span class="math inline">\(u_{j}\)</span>. Utility is a random variable that is modeled as <span class="math inline">\(u_{j} = v_{j} + \varepsilon_{j}\)</span>, where <span class="math inline">\(v_{j}\)</span> is the “observed utility” (a function of the observed attributes such that <span class="math inline">\(v_{j} = f(\mathrm{\mathbf{x}}_{j})\)</span>) and <span class="math inline">\(\varepsilon_{j}\)</span> is a random variable representing the portion of utility unobservable to the modeler.</p>
<p>Adopting the same notation as in Helveston et al. <span class="citation">(2018)</span>, consider the following utility model:</p>
<p><span class="math display">\[\begin{equation}
    u^*_{j} =
        \mathbf{β}^{*'} \mathrm{\mathbf{x}}_{j} +
        \alpha^{*} p_{j} +
        \varepsilon^{*}_{j},
        \quad\quad
        \varepsilon^{*}_{j} \sim \textrm{Gumbel}\left(0, \sigma^2\frac{\pi^2}{6}\right)
\label{eq:utility}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(\mathbf{β}^{*}\)</span> is the vector of coefficients for non-price attributes <span class="math inline">\(\mathrm{\mathbf{x}}_{j}\)</span>, <span class="math inline">\(\alpha^{*}\)</span> is the coefficient for price <span class="math inline">\(p_{j}\)</span>, and the error term, <span class="math inline">\(\varepsilon^{*}_{j}\)</span>, is an IID random variable with a Gumbel extreme value distribution of mean zero and variance <span class="math inline">\(\sigma^2(\pi^2/6)\)</span>. This model is not identified since there exists an infinite set of combinations of values for <span class="math inline">\(\mathbf{β}^{*}\)</span>, <span class="math inline">\(\alpha^{*}\)</span>, and <span class="math inline">\(\sigma\)</span> that produce the same choice probabilities. In order to specify an identifiable model, the modeler must normalize equation (). One approach is to normalize the scale of the error term by dividing equation () by <span class="math inline">\(\sigma\)</span>, producing the “preference space” utility specification:</p>
<p><span class="math display">\[\begin{equation}
    \left(\frac{u^*_{j}}{\sigma}\right) =
        \left( \frac{\mathbf{β}^{*}}{\sigma} \right)' \mathrm{\mathbf{x}}_{j} +
        \left( \frac{\alpha^{*}}{\sigma} \right) p_{j} +
        \left( \frac{\varepsilon^{*}_{j}}{\sigma} \right),
        \quad\quad
        \left( \frac{\varepsilon^{*}_{j}}{\sigma} \right) \sim \textrm{Gumbel}\left(0, \frac{\pi^2}{6}\right)
\label{eq:utilityPreferenceScaled}
\end{equation}\]</span></p>
<p>The typical preference space parameterization of the multinomial logit (MNL) model can then be written by rewriting equation () with <span class="math inline">\(u_j = (u^*_j / \sigma)\)</span>, <span class="math inline">\(\mathbf{β}= (\mathbf{β}^{*} / \sigma)\)</span>, <span class="math inline">\(\alpha = (\alpha^{*} / \sigma)\)</span>, and <span class="math inline">\(\varepsilon_{j} = (\varepsilon^{*}_{j} / \sigma)\)</span>:</p>
<p><span class="math display">\[\begin{equation}
    u_{j} =
        \mathbf{β}' \mathrm{\mathbf{x}}_{j} +
        \alpha p_{j} +
        \varepsilon_{j}
        \hspace{0.5in}
        \varepsilon_{j} \sim \textrm{Gumbel}\left(0,\frac{\pi^2}{6}\right)
\label{eq:utilityPreference}
\end{equation}\]</span></p>
<p>The vector <span class="math inline">\(\mathbf{β}\)</span> represents the marginal utility for changes in each non-price attribute, and <span class="math inline">\(\alpha\)</span> represents the marginal utility obtained from price reductions. In addition, the coefficients <span class="math inline">\(\mathbf{β}\)</span> and <span class="math inline">\(\alpha\)</span> are measured in units of <em>utility</em>, which only has relative rather than absolute meaning.</p>
<p>The alternative normalization approach is to normalize equation () by <span class="math inline">\(- \alpha^*\)</span> instead of <span class="math inline">\(\sigma\)</span>, producing the “willingness-to-pay (WTP) space” utility specification:</p>
<p><span class="math display">\[\begin{equation}
    \left(\frac{u^*_{j}}{- \alpha^*}\right) =
        \left(\frac{\mathbf{β}^{*}}{- \alpha^{*}}\right)' \mathrm{\mathbf{x}}_{j} +
        \left(\frac{\alpha^{*}}{- \alpha^{*}}\right) p_{j} +
        \left(\frac{\varepsilon^{*}_{j}}{- \alpha^{*}}\right),
        \quad\quad
        \left(\frac{\varepsilon^{*}_{j}}{- \alpha^{*}}\right) \sim \textrm{Gumbel} \left(0, \frac{\sigma^2}{(- \alpha^{*})^2}\frac{\pi^2}{6} \right)
\label{eq:utilityWtpScaled}
\end{equation}\]</span></p>
<p>Since the error term in equation is scaled by <span class="math inline">\(\lambda^2 = \sigma^2/(- \alpha^{*})^2\)</span>, we can rewrite equation () by multiplying both sides by <span class="math inline">\(\lambda= (- \alpha^{*} / \sigma\)</span>) and renaming <span class="math inline">\(u_j = (\lambda u^*_j /- \alpha^*)\)</span>, <span class="math inline">\(\mathbf{ω}= (\mathbf{β}^{*} /- \alpha^{*}\)</span>), and <span class="math inline">\(\varepsilon_j = (\lambda \varepsilon^*_j / - \alpha^*)\)</span>:</p>
<p><span class="math display">\[\begin{equation}
    u_{j} =
        \lambda \left(
            \mathbf{ω}' \mathrm{\mathbf{x}}_{j} - p_{j}
            \right) +
        \varepsilon_{j}
        \hspace{0.5in}
        \varepsilon_{j} \sim \textrm{Gumbel}\left(0, \frac{\pi^2}{6}\right)
\label{eq:utilityWtp}
\end{equation}\]</span></p>
<p>Here <span class="math inline">\(\mathbf{ω}\)</span> represents the marginal WTP for changes in each non-price attribute, and <span class="math inline">\(\lambda\)</span> represents the scale of the deterministic portion of utility relative to the standardized scale of the random error term.</p>
<p>The utility models in equations  and  represent the preference space and WTP space utility specifications, respectively. In equation , WTP is estimated as <span class="math inline">\(\hat{\mathbf{β}} / \hat{- \alpha}\)</span>; in equation , WTP is simply <span class="math inline">\(\hat{\mathbf{ω}}\)</span>.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references">
<div id="ref-Helveston2018">
<p>Helveston, John Paul, Elea McDonnell Feit, and Jeremy J. Michalek. 2018. “Pooling stated and revealed preference data in the presence of RP endogeneity.” <em>Transportation Research Part B: Methodological</em> 109: 70–89.</p>
</div>
<div id="ref-Louviere2000">
<p>Louviere, Jordan J., David A. Hensher, and Joffre Swait. 2000. <em>Stated Choice Methods: Analysis and Applications</em>. Edited by J. J. et al. Louviere. Cambridge, Massachusetts: Cambridge University Press.</p>
</div>
<div id="ref-Train2009">
<p>Train, Kenneth E. 2009. <em>Discrete Choice Methods with Simulation</em>. 2nd ed. Cambridge University Press.</p>
</div>
<div id="ref-Train2005">
<p>Train, Kenneth E., and Melvyn Weeks. 2005. “Discrete Choice Models in Preference and Willingness-to-Pay Space.” In <em>Appl. Simul. Methods Environ. Resour. Econ.</em>, 1–16.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Helveston.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
